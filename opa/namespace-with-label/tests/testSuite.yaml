---
kind: Suite
apiVersion: test.gatekeeper.sh/v1alpha1
metadata:
  name: block-resource-creation-if-label-in-ns-is-missing
tests:
- name: block-resource-creation-if-label-in-ns-is-missing
  template: ../namespacewithlabelsallowxrd-constraint-template.yaml
  constraint: ../namespacewithlabelsallowxrd-constraint.yaml
  cases:
  - name: missing label in namespace
    object: createObject.yaml
    inventory:
    - samples/namespace_without_label.yaml # This mocks the namespace without label
    assertions:
    - violations: yes
  - name: label present in namespace
    object: createObject.yaml
    inventory:
    - samples/namespace_with_label.yaml # This mocks the namespace with label
    assertions:
    - violations: no